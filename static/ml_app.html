<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>2048 RL Lab</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <h1>2048 RL Lab</h1>
        <span id="statusText">준비</span>
    </header>

    <div class="main">
        <!-- Game + Info -->
        <div class="game-row">
            <div class="grid" id="grid"></div>
            <div class="info">
                <div class="info-grid">
                    <div class="info-item"><div class="label">점수</div><div class="value" id="infoScore">0</div></div>
                    <div class="info-item"><div class="label">최고 타일</div><div class="value" id="infoMaxTile">0</div></div>
                    <div class="info-item"><div class="label">스텝</div><div class="value" id="infoStep">0</div></div>
                    <div class="info-item"><div class="label">보상</div><div class="value" id="infoReward">0</div></div>
                    <div class="info-item"><div class="label">탐험률</div><div class="value" id="infoEpsilon">1.000</div></div>
                    <div class="info-item"><div class="label">에피소드</div><div class="value" id="infoEpisode">0</div></div>
                </div>
                <div class="q-values">
                    <div class="label">Q-Values</div>
                    <div class="q-bar-row" id="qRow0"><span class="dir">↑</span><div class="q-bar"><div class="q-bar-fill"></div></div><span class="q-bar-val">0</span></div>
                    <div class="q-bar-row" id="qRow1"><span class="dir">↓</span><div class="q-bar"><div class="q-bar-fill"></div></div><span class="q-bar-val">0</span></div>
                    <div class="q-bar-row" id="qRow2"><span class="dir">←</span><div class="q-bar"><div class="q-bar-fill"></div></div><span class="q-bar-val">0</span></div>
                    <div class="q-bar-row" id="qRow3"><span class="dir">→</span><div class="q-bar"><div class="q-bar-fill"></div></div><span class="q-bar-val">0</span></div>
                </div>
            </div>
        </div>

        <!-- Network Graph -->
        <div class="network-section">
            <h3>신경망 구조 (16 → 256 → 256 → 4)</h3>
            <canvas id="networkCanvas" height="220"></canvas>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button id="btnNewModel">새 모델</button>
            <button id="btnLoad">불러오기</button>
            <input type="file" id="fileInput" accept=".json">
            <button id="btnSave">저장</button>
            <div class="sep"></div>
            <button id="btnPlay" class="accent">게임 실행</button>
            <button id="btnStep">1스텝</button>
            <div class="sep"></div>
            <button id="btnTD">TD 학습</button>
            <button id="btnMC">MC 학습</button>
            <button id="btnTS">TS 학습</button>
            <label>n=<input type="number" id="inputN" value="9999" min="1" max="10000"></label>
            <label>탐색 깊이<input type="number" id="inputSearchDepth" value="2" min="1" max="5" step="1"></label>
            <label><input type="checkbox" id="chkCurriculum"> 커리큘럼</label>
            <button id="btnStop" class="accent" disabled>중지</button>
            <div class="sep"></div>
            <label>γ<input type="number" id="inputGamma" value="0.999" min="0" max="1" step="0.001"></label>
            <label>α<input type="number" id="inputLearningRate" value="0.0001" min="0.00001" max="0.01" step="0.00001"></label>
            <label>ε시작<input type="number" id="inputEpsilonStart" value="0.05" min="0" max="1" step="0.01"></label>
            <label>ε감쇠<input type="number" id="inputEpsilonDecay" value="0.99" min="0" max="1" step="0.001"></label>
            <label>ε최소<input type="number" id="inputEpsilonEnd" value="0.0001" min="0" max="1" step="0.0001"></label>
        </div>
    </div>

    <script src="js/game2048.js"></script>
    <script src="js/qnetwork.js"></script>
    <script src="js/trainer.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>
